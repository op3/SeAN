cmake_minimum_required (VERSION 3.9 FATAL_ERROR)
project (sean)

set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${PROJECT_SOURCE_DIR}/cmake")

add_subdirectory("src/")
include_directories("include/")

add_executable(sean src/SeAN.cpp)
target_link_libraries(sean sean_lib)

list(APPEND CMAKE_PREFIX_PATH $ENV{ROOTSYS})
find_package(ROOT REQUIRED)
include(${ROOT_USE_FILE})
target_include_directories(sean_lib SYSTEM PUBLIC ${ROOT_INCLUDE_DIRS})
message(STATUS "${ROOT_INCLUDE_DIRS}")
message(STATUS "The ROOT version is: ${ROOT_VERSION}")
target_link_libraries(sean ${ROOT_LIBRARIES})

set(CMAKE_CXX_FLAGS_DEBUG "-g -Wall -Wextra -Wconversion -Wsign-conversion -fopenmp")
set(CMAKE_CXX_FLAGS_RELEASE "-O3 -march=native -fopenmp")
set(CMAKE_CXX_FLAGS_RELWITHDEBUGINFO "-g ${CMAKE_CXX_FLAGS_RELEASE}")
if(NOT CMAKE_BUILD_TYPE)
	set(CMAKE_BUILD_TYPE "Release")
	message(STATUS "Automatically set CMAKE_BUILD_TYPE to ${CMAKE_BUILD_TYPE}")
endif()

set(CONFIGURE_FILE_WARNING "/*\n\tWarning: Do not edit this file!\n\tIt was created automatically by CMake.\n\tTo make permanent changes to Config.h,\n\tedit the corresponding Config.h.in.\n*/")
configure_file(
	"${PROJECT_SOURCE_DIR}/include/Config.h.in"	
	"${PROJECT_SOURCE_DIR}/include/Config.h"	
)

install(TARGETS sean DESTINATION bin)
